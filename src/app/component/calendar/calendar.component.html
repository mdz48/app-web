<div class="calendar">
  <div class="calendar-header">
    <button class="month-btn" (click)="previousMonth()">Anterior</button>
    <h2>{{ monthNames[currentMonth] }} {{ currentYear }}</h2>
    <button class="month-btn" (click)="nextMonth()">Siguiente</button>
  </div>

  <div class="calendar-weekdays">
    <div *ngFor="let day of weekDays" class="weekday">{{ day }}</div>
  </div>

  <div class="calendar-grid">
    <div *ngFor="let blank of blankDays" class="calendar-day blank"></div>

    <div *ngFor="let day of daysInMonth" class="calendar-day" [class.progress-logged]="isProgressLogged(day)">
      <div class="day-number">{{ day }}</div>
      <button class="progress-btn" (click)="openForm(day)">Registrar Progreso</button>
    </div>
  </div>

  <div *ngIf="showForm" class="progress-form">
    <h3>Registrar progreso para el d√≠a {{ selectedDay }}/{{ currentMonth + 1 }}/{{ currentYear }}</h3>
    
    <div *ngFor="let tarea of tareasSeleccionadas" class="task-checkbox">
      <label>
        <input type="checkbox" [checked]="selectedTareas.includes(tarea)" (change)="onTareaChange(tarea, $event)">
        {{ tarea }}
      </label>
    </div>

    <button class="save-btn" (click)="saveProgress()">Guardar</button>
  </div>
</div>
